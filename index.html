<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>StackMob iOS SDK Reference</title>
		<link rel="stylesheet" type="text/css" href="css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.0.5 (build 789)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="index.html">StackMob iOS SDK </a></h1>
				<a id="developerHome" href="index.html">StackMob</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">StackMob iOS SDK Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar"></ul>
		</header>
		<article>
			<div id="overview_contents" role="main">
				<div class="main-navigation navigation-top">
					<a href="hierarchy.html">Next</a>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">StackMob iOS SDK Reference</h1>
					</div>		
				</div>
				<div id="container">
					
					<div class="section section-overview index-overview">
						
						
						<h1>Welcome to the docs for the StackMob iOS SDK!</h1>

<h3>Current Version: 1.1.1</h3>

<h3>Jump To:</h3>

<p><a href="#overview">Overview</a></p>

<p><a href="#getting_started">Getting Started</a></p>

<p><a href="#coding_practices">StackMob &lt;&mdash;> Core Data Coding Practices</a></p>

<p><a href="http://stackmob.github.com/stackmob-ios-sdk/CoreDataSupportSpecs.html">StackMob &lt;&mdash;> Core Data Support Specifications</a></p>

<p><a href="#classes_to_check_out">Classes To Check Out</a></p>

<p><a href="#tutorials">Tutorials</a></p>

<p><a href="#core_data_references">Core Data References</a></p>

<p><a href="#class_index">Index of Classes</a></p>

<p><a name="overview">&nbsp;</a></p>

<h2>Overview</h2>

<p>The goal of the iOS SDK is to provide the best experience possible for developing an application that uses StackMob as a cloud backend.</p>

<br/>


<h3>How is the new iOS SDK different from the older version?</h3>

<p>The biggest difference between the new and the current SDKs is our use of Core Data as a foundation for the new SDK. We believe Core Data is a powerful approach for integrating StackMob’s REST based API into an iOS application.</p>

<p>That being said, we understand that Core Data is not suitable for every application, which is why we still expose the complete REST based API for making create, read, update and delete calls and performing queries on your database.</p>

<p>We&rsquo;ve also separated our Push Notification API into a separate SDK. For more information, see the <a href="http://stackmob.github.com/stackmob-ios-push-sdk/Classes/SMPushClient.html">iOS Push SDK Reference</a>.</p>

<br/>


<h3>Why base the new SDK on Core Data?</h3>

<p>Our number one goal is to create a better experience. Core Data allows us to place a familiar wrapper around StackMob REST calls and Datastore API. iOS developers can leverage their existing knowledge of Core Data to quickly integrate StackMob into their applications.  For those interested in sticking to the REST-based way of making requests, we provide the full Datastore API as well.</p>

<br/>


<h3>Already know Core Data?</h3>

<p>Then you already know how to use StackMob!</p>

<p>All you need to do to get started with StackMob is initialize an instance of SMClient and grab the configured managed object context by following the instructions in <a href="#getting_started">Initialize an SMClient</a>.</p>

<br/>


<h3>What&rsquo;s supported with our Core Data integration?</h3>

<p>Check out the <a href="http://stackmob.github.com/stackmob-ios-sdk/CoreDataSupportSpecs.html">StackMob &lt;&mdash;> Core Data Support Specifications</a>.</p>

<br/>


<h3>Reporting issues or feature requests</h3>

<p>You can file issues through the <a href="https://github.com/stackmob/stackmob-ios-sdk/issues">GitHub issue tracker</a>.</p>

<br/>


<h3>Still have questions about the new iOS SDK?</h3>

<p>Email us at <a href="mailto:support@stackmob.com">support@stackmob.com</a>.</p>

<p><a name="getting_started">&nbsp;</a></p>

<h2>Getting Started</h2>

<p>If you don&rsquo;t already have the StackMob SDK imported into your application, <a href="https://developer.stackmob.com/start">get started with StackMob</a>.</p>

<p><strong>The fundamental class for StackMob is SMClient</strong>.  From an instance of this class you have access to a configured managed object context and persistent store coordinator as well as a REST-based Datastore. Check out the <a href="http://stackmob.github.com/stackmob-ios-sdk/Classes/SMClient.html">class reference for SMClient</a> for more information.  Let&rsquo;s see how to initialize our <code>SMClient</code>:</p>

<br/>


<h3>Initialize an SMClient</h3>

<p>Wherever you plan to use StackMob, add <code>#import "StackMob.h"</code> to the header file.</p>

<p>Create a variable of class <code>SMClient</code>, most likely in your AppDelegate file where you initialize other application wide variables, and initialize it like this:</p>

<pre><code>// Assuming your variable is declared SMClient *client;
client = [[SMClient alloc] initWithAPIVersion:@"YOUR_API_VERSION" publicKey:@"YOUR_PUBLIC_KEY"];
</code></pre>

<p>For YOUR_API_VERSION, pass @&ldquo;0&rdquo; for Development, @&ldquo;1&rdquo; or higher for the corresponding version in Production.</p>

<p>If you haven&rsquo;t found your public key yet, check out <strong>Manage App Info</strong> under the <strong>App Settings</strong> sidebar on the <a href="https://dashboard.stackmob.com">Dashboard page</a>.</p>

<br/>


<h3>Start persisting data</h3>

<p>There are two ways to persist data to StackMob:</p>

<ul>
<li>Core Data</li>
<li>Lower Level Datastore API</li>
</ul>


<br/>


<h4>Core Data</h4>

<p>StackMob recommends using Core Data… it provides a powerful and robust object graph management system that otherwise would be a nightmare to implement.  Although it may have a reputation for being pretty complex, the basics are easy to grasp and understand.  If you want to learn the basics, check out <a href="#core_data_references">Core Data References</a> below.</p>

<p>The three main pieces of Core Data are instances of:</p>

<ul>
<li><a href="https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html">NSManagedObjectContext</a> &ndash; This is what you use to create, read, update and delete objects in your database.</li>
<li><a href="https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSPersistentStoreCoordinator_Class/NSPersistentStoreCoordinator.html">NSPersistentStoreCoordinator</a> &ndash; Coordinates between the managed object context and the actual database, in this case StackMob.</li>
<li><a href="https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectModel_Class/Reference/Reference.html">NSManagedObjectModel</a> &ndash; References a file where you defined your object graph.</li>
</ul>


<p><strong>Access a StackMob-configured managed object context</strong></p>

<p>You can obtain a managed object context configured from your SMClient instance like this:</p>

<pre><code>// aManagedObjectModel is an initialized instance of NSManagedObjectModel
// client is your instance of SMClient
SMCoreDataStore *coreDataStore = [client coreDataStoreWithManagedObjectModel:aManagedObjectModel];

// assuming you have a variable called managedObjectContext
self.managedObjectContext = [coreDataStore managedObjectContext];
</code></pre>

<p>Use this instance of NSManagedObjectContext throughout your application. Other than that, use Core Data like you normally would!</p>

<p><strong>Important:</strong> Make sure you adhere to the <a href="#coding_practices">StackMob &lt;&mdash;> Core Data Coding Practices</a>!</p>

<br/>


<h4>Lower Level Datastore API</h4>

<p>If you want to make direct REST-based calls to the Datastore, check out the <a href="http://stackmob.github.com/stackmob-ios-sdk/Classes/SMDataStore.html">SMDataStore</a> class.</p>

<br/>


<h3>User Schema and Authentication</h3>

<p>SMClient provides all the necessary methods for user authentication.</p>

<p>The default schema to use for authentication is <strong>user</strong>, with <strong>username</strong> and <strong>password</strong> fields.</p>

<p>You can set these using setters or the extended <code>SMClient</code> initialization method.</p>

<p>For more information see <strong>The User Schema</strong> and <strong>User Authentication</strong> sections of the <a href="http://stackmob.github.com/stackmob-ios-sdk/Classes/SMClient.html">SMClient Class Reference</a>.</p>

<br/>


<h3>Push Notifications</h3>

<p>Push Notification support has been moved into a separate SDK.  Check out the <a href="http://stackmob.github.com/stackmob-ios-push-sdk/Classes/SMPushClient.html">iOS Push SDK Reference</a> to get started with push.</p>

<br/>


<h3>Debugging</h3>

<p>The iOS SDK gives developers access to two global variables that will enable additional logging statements when using the Core Data integration:</p>

<ul>
<li><strong>SM_CORE_DATA_DEBUG</strong> &ndash; In your AppDelegate&rsquo;s <code>application:DidFinishLaunchingWithOptions:</code> method, include the line <code>SM_CORE_DATA_DEBUG = YES;</code> to turn on log statements from <code>SMIncrementalStore</code>. This will provide information about the Datastore calls to StackMob happening behind the scenes during Core Data saves and fetches. The default is <code>NO</code>.</li>
<li><strong>SM_MAX_LOG_LENGTH</strong> &ndash; Used to control how many characters are printed when logging objects. The default is <strong>10,000</strong>, which is plenty, so you will almost never have to set this.  The only time you will see the string representation of an object truncated is when you have an Attribute of type String that maps to a field of type Binary on StackMob, because you are sending a string containing the binary of the image, etc. String representations of objects that have been truncated end with &lt;MAX_LOG_LENGTH_REACHED>.</li>
</ul>


<p><a name="coding_practices">&nbsp;</a></p>

<h2>StackMob &lt;&mdash;> Core Data Coding Practices</h2>

<p>There are a few coding practices to adhere to as well as general things to keep in mind when using StackMob with Core Data.  This allows StackMob to seamlessly translate to and from the language that Core Data speaks.</p>

<p>First, a table of how Core Data, StackMob and regular databases map to each other:</p>

<table cellpadding="8px" width="600px">
    <tr align="center">
        <th>Core Data</th>
        <th>StackMob</th>
        <th>Database</th>
    </tr>
    <tr>
        <td>Entity</td>
        <td>Schema</td>
        <td>Table</td>
    </tr>
    <tr>
        <td>Attribute</td>
        <td>Field</td>
        <td>Column</td>
    </tr>
    <tr>
        <td>Relationship</td>
        <td>Relationship</td>
        <td>Reference Column</td>
    </tr>
</table>


<p><strong>General Information:</strong></p>

<ol>
<li><strong>Entity Names:</strong> Core Data entities are encouraged to start with a capital letter and will translate to all lowercase on StackMob. Example: <strong>Superpower</strong> entity on Core Data translates to <strong>superpower</strong> schema on StackMob.</li>
<li><strong>Property Names:</strong> Core Data attribute and relationship names are encouraged to be in camelCase, but can also be in StackMob form, all lowercase with optional underscores. Acceptable formats are therefore <strong>yearBorn</strong>, <strong>year_born</strong>, or <strong>yearborn</strong>. All camelCased names will be converted to and from their equivalent form on StackMob, i.e. the property yearBorn will appear as year_born on StackMob.</li>
<li><strong>StackMob Schema Primary Keys:</strong> All StackMob schemas have a primary key field that is always schemaName_id, unless the schema is a user object, in which case it defaults to &ldquo;username&rdquo; but can be changed manually by setting the userPrimaryKeyField property in your <code>SMClient</code> instance.</li>
</ol>


<br/>


<p><strong>Coding Practices for successful app development:</strong></p>

<ol>
<li><strong>Entity Primary Keys:</strong> Following #3 above, each Core Data entity must include an attribute of type string that maps to the primary key field on StackMob. Acceptable formats are <em>schemaName_Id or </em>schemaName__id. If the managed object subclass for the Entity inherits from <code>SMUserManagedObject</code>, meaning it is intended to define user objects, you may use either of the above formats or whatever lowercase string with optional underscores matches the primary key field on StackMob. For example: entity <strong>Soda</strong> should have attribute <strong>sodaId</strong> or <strong>soda_id</strong>, whereas your <strong>User</strong> entity primary key field defaults to <strong>@&ldquo;username&rdquo;</strong>.</li>
<li><p><strong>Assign IDs:</strong> When inserting new objects into your managed object context, you must assign an id value to the attribute which maps to the StackMob primary key field BEFORE you make save the context.
90% of the time you can get away with assigning ids like this:</p>

<pre><code>  // assuming your instance is called newManagedObject
  [newManagedObject setValue:[newManagedObject assignObjectId] forKey:[newManagedObject primaryKeyField]];

  // now you can make a call to save: on your managed object context
</code></pre>

<p>  The other 10% of the time is when you want to assign your own ids that aren&rsquo;t unique strings based on a UUID algorithm. A great example of this is user objects, where you would probably assign the user&rsquo;s name to the primary key field.  In that case, your code might look more like this:</p>

<pre><code>  // assuming your instance is called newManagedObject
  [newManagedObject setValue:@"bob" forKey:[newManagedObject primaryKeyField]];

  // now you can make a call to save: on your managed object context 
</code></pre></li>
<li><p><strong>NSManagedObject Subclasses:</strong> Creating an NSManagedObject subclass for each of your entities is highly recommended for convenience. You can add an init method to each subclass and include the ID assignment line from above &ndash; then you don&rsquo;t have to remember to do it each time you create a new object!</p></li>
<li><p><strong>Asynchronous Save Calls:</strong> Core Data performs synchronous calls to its Persistent Store. To get the effect of asynchronous save: calls on your managed object context, allowing you to continue working on the main thread, you can use NSManagedObjectContext&rsquo;s performBlock: method like this:</p>

<pre><code> // assuming your context is called self.managedObjectContext
 [self.managedObjectContext performBlock:^{
     NSError *error = nil;
     if (![context save:&amp;error]) {
         // Code to handle the error appropriately.
     } else {
         // Code to handle success.
     }
 }];
</code></pre>

<p> Optionally you can use dispatch queues from Apple&rsquo;s <a href="http://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html" target="_blank">Grand Central Dispatch</a>. <strong>Important:</strong> You should not perform other methods such as creating, updating or deleting objects on the managed object context while a save is in progress.</p></li>
</ol>


<p><a name="classes_to_check_out">&nbsp;</a></p>

<h2>Classes To Check Out</h2>

<ul>
<li><a href="http://stackmob.github.com/stackmob-ios-sdk/Classes/SMClient.html">SMClient</a> &ndash; Gives you access to everything you need to communicate with StackMob.</li>
<li><a href="http://stackmob.github.com/stackmob-ios-sdk/Classes/SMCoreDataStore.html">SMCoreDataStore</a> &ndash;  Gives you access to a configured NSManagedObjectContext communicate with StackMob directly through Core Data.</li>
<li><a href="http://stackmob.github.com/stackmob-ios-sdk/Classes/SMDataStore.html">SMDataStore</a> &ndash; Gives you access to make direct REST-based calls to StackMob.</li>
<li><a href="http://stackmob.github.com/stackmob-ios-sdk/Classes/SMRequestOptions.html">SMRequestOptions</a> &ndash; When making direct calls to StackMob, an instance of SMRequestOptions gives you request configuration options.</li>
<li><a href="http://stackmob.github.com/stackmob-ios-sdk/Classes/SMUserManagedObject.html">SMUserManagedObject</a> &ndash; The managed object subclass that defines your users should inherit from SMUserManagedObject.</li>
<li><a href="http://stackmob.github.com/stackmob-ios-sdk/Classes/SMCustomCodeRequest.html">SMCustomCodeRequest</a> &ndash; Starting place for making custom code calls.</li>
<li><a href="http://stackmob.github.com/stackmob-ios-sdk/Classes/SMBinaryDataConversion.html">SMBinaryDataConversion</a> &ndash; Convert NSData to NSString for persisting to a field on StackMob with type Binary Data (s3 Integration).</li>
</ul>


<p><a name="tutorials">&nbsp;</a></p>

<h2>Tutorials</h2>

<p>You can find all the iOS SDK tutorials at our <a href="https://developer.stackmob.com/tutorials/ios" target="_blank">Dev Center</a>.</p>

<p><a name="core_data_references">&nbsp;</a></p>

<h2>Core Data References</h2>

<ul>
<li><a href="http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started">Getting Started With Core Data</a> &ndash; Ray Wenderlich does a great tutorial on the basics of Core Data.  I would definitely start here.</li>
<li><a href="http://mobile.tutsplus.com/tutorials/iphone/iphone-core-data/">iPhone Core Data: Your First Steps</a> &ndash; Well organized tutorial on Core Data.</li>
<li><a href="https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/cdProgrammingGuide.html#//apple_ref/doc/uid/TP40001075">Introduction To Core Data</a> &ndash; Apple&rsquo;s Core Data Programming Guide</li>
<li><a href="https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Predicates/predicates.html#//apple_ref/doc/uid/TP40001789">Introduction To Predicates</a> &ndash; Apple&rsquo;s Predicates Programming Guide</li>
</ul>


<p><a name="class_index">&nbsp;</a></p>

<h2>Index</h2>
						
						
					</div>
					
                        
                    
					
					
					<div class="index-column">
						<h2 class="index-title">Class References</h2>
						<ul>
							
							<li><a href="Classes/SMBinaryDataConversion.html">SMBinaryDataConversion</a></li>
							
							<li><a href="Classes/SMClient.html">SMClient</a></li>
							
							<li><a href="Classes/SMCoreDataStore.html">SMCoreDataStore</a></li>
							
							<li><a href="Classes/SMCustomCodeRequest.html">SMCustomCodeRequest</a></li>
							
							<li><a href="Classes/SMDataStore.html">SMDataStore</a></li>
							
							<li><a href="Classes/SMIncrementalStore.html">SMIncrementalStore</a></li>
							
							<li><a href="Classes/SMOAuth2Client.html">SMOAuth2Client</a></li>
							
							<li><a href="Classes/SMQuery.html">SMQuery</a></li>
							
							<li><a href="Classes/SMRequestOptions.html">SMRequestOptions</a></li>
							
							<li><a href="Classes/SMUserManagedObject.html">SMUserManagedObject</a></li>
							
							<li><a href="Classes/SMUserSession.html">SMUserSession</a></li>
							
							<li><a href="Classes/Synchronization.html">Synchronization</a></li>
							
						</ul>
					</div>
					
					
						
					<div class="index-column">
						
						
						<h2 class="index-title">Category References</h2>
						<ul>
							
							<li><a href="Categories/NSArray+Enumerable.html">NSArray(Enumerable)</a></li>
							
							<li><a href="Categories/NSDictionary+AtomicCounter.html">NSDictionary(AtomicCounter)</a></li>
							
							<li><a href="Categories/NSEntityDescription+StackMobSerialization.html">NSEntityDescription(StackMobSerialization)</a></li>
							
							<li><a href="Categories/NSManagedObject+StackMobSerialization.html">NSManagedObject(StackMobSerialization)</a></li>
							
							<li><a href="Categories/NSMutableDictionary+AtomicCounter.html">NSMutableDictionary(AtomicCounter)</a></li>
							
							<li><a href="Categories/SMDataStore+SpecialCondition.html">SMDataStore(SpecialCondition)</a></li>
							
							<li><a href="Categories/SMIncrementalStore+Query.html">SMIncrementalStore(Query)</a></li>
							
						</ul>
						
					</div>
					
				</div>
				<div class="main-navigation navigation-bottom">
					<a href="hierarchy.html">Next</a>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2012 StackMob. All rights reserved. (Last updated: 2012-10-24)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.0.5 (build 789)</a>.</span></p>
						
	
					</div>
				</div>
			</div>
		</article>		
	</body>
</html>